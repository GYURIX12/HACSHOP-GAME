<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <title>Hacker Piac</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <h1>Hacker Piac</h1>
    <p>Egyenleg: <span id="coins">0</span> üí∞</p>
    <div id="marketItems"></div>
    <hr>
    <h2>Adj el valamit:</h2>
    <input type="text" id="itemName" placeholder="Term√©k neve"><br><br>
    <textarea id="itemDesc" placeholder="Le√≠r√°s..." rows="4"></textarea><br><br>
    <button onclick="addItem()">Felt√∂lt√©s</button><br><br>
    <a href="index.html">Vissza</a>
  </div>

  <script>
    if (localStorage.getItem("loggedIn") !== "true") {
      window.location.href = "login.html";
    }

    let coins = parseInt(localStorage.getItem("coins")) || 0;
    document.getElementById("coins").innerText = coins;

    const items = [
      { name: "Jelsz√≥t√∂r≈ë script", desc: "Egyszer≈± brute force Python script.", price: 20 },
      { name: "Caesar-k√≥d sablon", desc: "HTML + JS sablon Caesar titkos√≠t√°shoz.", price: 15 }
    ];

    function displayItems() {
      const container = document.getElementById("marketItems");
      container.innerHTML = "";
      items.forEach((item, index) => {
        container.innerHTML += `<div class='item'><h3>${item.name}</h3><p>${item.desc}</p><p>√År: ${item.price} üí∞</p>
        <button onclick="buyItem(${index})">V√°s√°rl√°s</button></div>`;
      });
    }

    function addItem() {
      const name = document.getElementById("itemName").value;
      const desc = document.getElementById("itemDesc").value;
      if (name && desc) {
        items.push({ name, desc, price: 10 });
        displayItems();
        document.getElementById("itemName").value = "";
        document.getElementById("itemDesc").value = "";
      }
    }

    function buyItem(index) {
      const price = items[index].price;
      if (coins >= price) {
        coins -= price;
        localStorage.setItem("coins", coins);
        document.getElementById("coins").innerText = coins;
        alert("Sikeres v√°s√°rl√°s: " + items[index].name);
      } else {
        alert("Nincs el√©g p√©nzed!");
      }
    }

    window.onload = displayItems;
  </script>
</body>
</html>
